# Publish wheels to PyPI
#
# Assumed to run as a subworkflow of `.github/workflows/release.yml`.
# Specifically, as a `publish` step within `cargo-dist`.
#
# Pulls the wheels generated by `build-wheels.yml` during the
# `local-artifacts-jobs` step.
#
# See these docs for more about trusted publishing
# https://docs.pypi.org/trusted-publishers/
name: "Publish to PyPI"

on:
  workflow_call:
    # Passed via dist, but not used
    inputs:
      plan:
        required: true
        type: string

jobs:
  publish:
    name: "Publish to PyPI"
    runs-on: ubuntu-latest

    # For the restricted GitHub Environment
    environment: pypi

    permissions:
      # For PyPI's trusted publishing
      id-token: write

    steps:
      - uses: astral-sh/setup-uv@v7

#       - name: "Download wheels"
#         uses: actions/download-artifact@v4
#         with:
#           pattern: wheels-*
#           path: wheels
#           merge-multiple: true
#
#       - name: "Publish to PyPI"
#         run: uv publish wheels/*
